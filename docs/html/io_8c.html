<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SpecTrax: io.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SpecTrax
   </div>
   <div id="projectbrief">A cross-platform Groovebox DAW</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('io_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">io.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="io_8h_source.html">io.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0ee74bbd7a1d323b8c4533cfee28587b" id="r_a0ee74bbd7a1d323b8c4533cfee28587b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02">FileResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0ee74bbd7a1d323b8c4533cfee28587b">saveSettings</a> (const char *filename, <a class="el" href="struct_settings.html">Settings</a> *settings)</td></tr>
<tr class="memdesc:a0ee74bbd7a1d323b8c4533cfee28587b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves application settings to a binary file.  <br /></td></tr>
<tr class="separator:a0ee74bbd7a1d323b8c4533cfee28587b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34b69ab24373985afad6a73ba8ec5f9e" id="r_a34b69ab24373985afad6a73ba8ec5f9e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02">FileResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a34b69ab24373985afad6a73ba8ec5f9e">loadSettings</a> (const char *filename, <a class="el" href="struct_settings.html">Settings</a> *settings)</td></tr>
<tr class="memdesc:a34b69ab24373985afad6a73ba8ec5f9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads application settings from a binary file.  <br /></td></tr>
<tr class="separator:a34b69ab24373985afad6a73ba8ec5f9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22a0fa54facdb8d991e45e222db52ead" id="r_a22a0fa54facdb8d991e45e222db52ead"><td class="memItemLeft" align="right" valign="top"><a class="el" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02">FileResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a22a0fa54facdb8d991e45e222db52ead">saveColourScheme</a> (const char *filename, <a class="el" href="struct_colour_scheme.html">ColourScheme</a> *colourScheme)</td></tr>
<tr class="memdesc:a22a0fa54facdb8d991e45e222db52ead"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves a colour scheme to a binary file.  <br /></td></tr>
<tr class="separator:a22a0fa54facdb8d991e45e222db52ead"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a415efc3af04aa636ce892a89ce50d30b" id="r_a415efc3af04aa636ce892a89ce50d30b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02">FileResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a415efc3af04aa636ce892a89ce50d30b">loadColourScheme</a> (const char *filename, <a class="el" href="struct_colour_scheme.html">ColourScheme</a> *colourScheme)</td></tr>
<tr class="memdesc:a415efc3af04aa636ce892a89ce50d30b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a colour scheme from a binary file.  <br /></td></tr>
<tr class="separator:a415efc3af04aa636ce892a89ce50d30b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad73e7d721b9560a5463ee1a7ce2918f6" id="r_ad73e7d721b9560a5463ee1a7ce2918f6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02">FileResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad73e7d721b9560a5463ee1a7ce2918f6">loadColourSchemeTxt</a> (const char *filename, Color *colourArray[], int arraySize)</td></tr>
<tr class="memdesc:ad73e7d721b9560a5463ee1a7ce2918f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a colour scheme from a text file format.  <br /></td></tr>
<tr class="separator:ad73e7d721b9560a5463ee1a7ce2918f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18b2dfb386b19c9b8a56ed880d3a7f25" id="r_a18b2dfb386b19c9b8a56ed880d3a7f25"><td class="memItemLeft" align="right" valign="top"><a class="el" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76">SequencerFileResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a18b2dfb386b19c9b8a56ed880d3a7f25">saveSequencerState</a> (const char *filename, <a class="el" href="struct_arranger.html">Arranger</a> *arranger, <a class="el" href="struct_pattern_list.html">PatternList</a> *patterns)</td></tr>
<tr class="memdesc:a18b2dfb386b19c9b8a56ed880d3a7f25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads the complete sequencer state from a binary file.  <br /></td></tr>
<tr class="separator:a18b2dfb386b19c9b8a56ed880d3a7f25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaad57709f4a1703fda3356ae6163bb29" id="r_aaad57709f4a1703fda3356ae6163bb29"><td class="memItemLeft" align="right" valign="top"><a class="el" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76">SequencerFileResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaad57709f4a1703fda3356ae6163bb29">loadSequencerState</a> (const char *filename, <a class="el" href="struct_arranger.html">Arranger</a> *arranger, <a class="el" href="struct_pattern_list.html">PatternList</a> *patterns)</td></tr>
<tr class="memdesc:aaad57709f4a1703fda3356ae6163bb29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads the complete sequencer state from a binary file.  <br /></td></tr>
<tr class="separator:aaad57709f4a1703fda3356ae6163bb29"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a415efc3af04aa636ce892a89ce50d30b" name="a415efc3af04aa636ce892a89ce50d30b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a415efc3af04aa636ce892a89ce50d30b">&#9670;&#160;</a></span>loadColourScheme()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02">FileResult</a> loadColourScheme </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_colour_scheme.html">ColourScheme</a> *</td>          <td class="paramname"><span class="paramname"><em>colourScheme</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads a colour scheme from a binary file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to the colour scheme file to load </td></tr>
    <tr><td class="paramname">colourScheme</td><td>Pointer to <a class="el" href="struct_colour_scheme.html">ColourScheme</a> structure to populate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02">FileResult</a> indicating success (FILE_OK) or specific error codes:<ul>
<li>FILE_ERROR_OPEN if file cannot be opened</li>
<li>FILE_ERROR_FORMAT if file has invalid magic number</li>
<li>FILE_ERROR_READ if reading colour scheme data fails </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   47</span>                                                                              {</div>
<div class="line"><span class="lineno">   48</span>    FILE* file = fopen(filename, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><span class="lineno">   49</span>    <span class="keywordflow">if</span> (!file) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02a7ddb4c741a1e9ec5a6f81c19a82533ff">FILE_ERROR_OPEN</a>;</div>
<div class="line"><span class="lineno">   50</span>    </div>
<div class="line"><span class="lineno">   51</span>    <span class="keywordtype">char</span> magic[4];</div>
<div class="line"><span class="lineno">   52</span>    <span class="keywordflow">if</span> (fread(magic, 1, 4, file) != 4 || memcmp(magic, <span class="stringliteral">&quot;CSC1&quot;</span>, 4) != 0) {</div>
<div class="line"><span class="lineno">   53</span>        fclose(file);</div>
<div class="line"><span class="lineno">   54</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02a59413acd484f9fd5940fa48bb912bd2d">FILE_ERROR_FORMAT</a>;</div>
<div class="line"><span class="lineno">   55</span>    }</div>
<div class="line"><span class="lineno">   56</span>    </div>
<div class="line"><span class="lineno">   57</span>    <span class="keywordflow">if</span> (fread(colourScheme, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_colour_scheme.html">ColourScheme</a>), 1, file) != 1) {</div>
<div class="line"><span class="lineno">   58</span>        fclose(file);</div>
<div class="line"><span class="lineno">   59</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02ac542004ab939b96377b0b1ccd48946b7">FILE_ERROR_READ</a>;</div>
<div class="line"><span class="lineno">   60</span>    }</div>
<div class="line"><span class="lineno">   61</span>    </div>
<div class="line"><span class="lineno">   62</span>    fclose(file);</div>
<div class="line"><span class="lineno">   63</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02acc5440fbbcea7fbd0094369d27686b16">FILE_OK</a>;</div>
<div class="line"><span class="lineno">   64</span>}</div>
<div class="ttc" id="aio_8h_html_a20f28dd2422b72c67a3b48aeb5486c02a59413acd484f9fd5940fa48bb912bd2d"><div class="ttname"><a href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02a59413acd484f9fd5940fa48bb912bd2d">FILE_ERROR_FORMAT</a></div><div class="ttdeci">@ FILE_ERROR_FORMAT</div><div class="ttdef"><b>Definition</b> io.h:20</div></div>
<div class="ttc" id="aio_8h_html_a20f28dd2422b72c67a3b48aeb5486c02a7ddb4c741a1e9ec5a6f81c19a82533ff"><div class="ttname"><a href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02a7ddb4c741a1e9ec5a6f81c19a82533ff">FILE_ERROR_OPEN</a></div><div class="ttdeci">@ FILE_ERROR_OPEN</div><div class="ttdef"><b>Definition</b> io.h:17</div></div>
<div class="ttc" id="aio_8h_html_a20f28dd2422b72c67a3b48aeb5486c02ac542004ab939b96377b0b1ccd48946b7"><div class="ttname"><a href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02ac542004ab939b96377b0b1ccd48946b7">FILE_ERROR_READ</a></div><div class="ttdeci">@ FILE_ERROR_READ</div><div class="ttdef"><b>Definition</b> io.h:18</div></div>
<div class="ttc" id="aio_8h_html_a20f28dd2422b72c67a3b48aeb5486c02acc5440fbbcea7fbd0094369d27686b16"><div class="ttname"><a href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02acc5440fbbcea7fbd0094369d27686b16">FILE_OK</a></div><div class="ttdeci">@ FILE_OK</div><div class="ttdef"><b>Definition</b> io.h:16</div></div>
<div class="ttc" id="astruct_colour_scheme_html"><div class="ttname"><a href="struct_colour_scheme.html">ColourScheme</a></div><div class="ttdef"><b>Definition</b> gui.h:30</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad73e7d721b9560a5463ee1a7ce2918f6" name="ad73e7d721b9560a5463ee1a7ce2918f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad73e7d721b9560a5463ee1a7ce2918f6">&#9670;&#160;</a></span>loadColourSchemeTxt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02">FileResult</a> loadColourSchemeTxt </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Color *</td>          <td class="paramname"><span class="paramname"><em>colourArray</em></span>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>arraySize</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads a colour scheme from a text file format. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to the text-based colour scheme file </td></tr>
    <tr><td class="paramname">colourScheme</td><td>Pointer to <a class="el" href="struct_colour_scheme.html">ColourScheme</a> structure to populate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02">FileResult</a> indicating success (FILE_OK) or specific error codes:<ul>
<li>FILE_ERROR_OPEN if file cannot be opened</li>
<li>FILE_ERROR_FORMAT if file format is invalid</li>
<li>FILE_ERROR_READ if reading colour data fails </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   66</span>                                                                                          {</div>
<div class="line"><span class="lineno">   67</span>    FILE* file = fopen(filename, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><span class="lineno">   68</span>    <span class="keywordflow">if</span> (!file) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02a7ddb4c741a1e9ec5a6f81c19a82533ff">FILE_ERROR_OPEN</a>;</div>
<div class="line"><span class="lineno">   69</span>    </div>
<div class="line"><span class="lineno">   70</span>    <span class="keywordtype">char</span> line[32];</div>
<div class="line"><span class="lineno">   71</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; arraySize; i++) {</div>
<div class="line"><span class="lineno">   72</span>        <span class="keywordflow">if</span> (!fgets(line, <span class="keyword">sizeof</span>(line), file)) {</div>
<div class="line"><span class="lineno">   73</span>            fclose(file);</div>
<div class="line"><span class="lineno">   74</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02ac542004ab939b96377b0b1ccd48946b7">FILE_ERROR_READ</a>;</div>
<div class="line"><span class="lineno">   75</span>        }</div>
<div class="line"><span class="lineno">   76</span>        </div>
<div class="line"><span class="lineno">   77</span>        <span class="keywordtype">int</span> r, g, b;</div>
<div class="line"><span class="lineno">   78</span>        <span class="keywordflow">if</span> (sscanf(line, <span class="stringliteral">&quot;%d,%d,%d&quot;</span>, &amp;r, &amp;g, &amp;b) != 3 ||</div>
<div class="line"><span class="lineno">   79</span>            r &lt; 0 || r &gt; 255 || g &lt; 0 || g &gt; 255 || b &lt; 0 || b &gt; 255) {</div>
<div class="line"><span class="lineno">   80</span>            fclose(file);</div>
<div class="line"><span class="lineno">   81</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02a59413acd484f9fd5940fa48bb912bd2d">FILE_ERROR_FORMAT</a>;</div>
<div class="line"><span class="lineno">   82</span>        }</div>
<div class="line"><span class="lineno">   83</span>        </div>
<div class="line"><span class="lineno">   84</span>        colourArray[i]-&gt;r = r;</div>
<div class="line"><span class="lineno">   85</span>        colourArray[i]-&gt;g = g;</div>
<div class="line"><span class="lineno">   86</span>        colourArray[i]-&gt;b = b;</div>
<div class="line"><span class="lineno">   87</span>    }</div>
<div class="line"><span class="lineno">   88</span>    </div>
<div class="line"><span class="lineno">   89</span>    fclose(file);</div>
<div class="line"><span class="lineno">   90</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02acc5440fbbcea7fbd0094369d27686b16">FILE_OK</a>;</div>
<div class="line"><span class="lineno">   91</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

</div>
</div>
<a id="aaad57709f4a1703fda3356ae6163bb29" name="aaad57709f4a1703fda3356ae6163bb29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaad57709f4a1703fda3356ae6163bb29">&#9670;&#160;</a></span>loadSequencerState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76">SequencerFileResult</a> loadSequencerState </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_arranger.html">Arranger</a> *</td>          <td class="paramname"><span class="paramname"><em>arranger</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_pattern_list.html">PatternList</a> *</td>          <td class="paramname"><span class="paramname"><em>patterns</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads the complete sequencer state from a binary file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to the sequencer state file to load </td></tr>
    <tr><td class="paramname">arranger</td><td>Pointer to <a class="el" href="struct_arranger.html">Arranger</a> structure to populate with playhead, channel and song data </td></tr>
    <tr><td class="paramname">patterns</td><td>Pointer to <a class="el" href="struct_pattern_list.html">PatternList</a> structure to populate with pattern data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76">SequencerFileResult</a> indicating success (SEQ_OK) or specific error codes:<ul>
<li>SEQ_ERROR_OPEN if file cannot be opened</li>
<li>SEQ_ERROR_FORMAT if file format or section headers are invalid </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  146</span>                                                                                                        {</div>
<div class="line"><span class="lineno">  147</span>    FILE* file = fopen(filename, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><span class="lineno">  148</span>    <span class="keywordflow">if</span> (!file) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76a54276461b1aaf5c8921fba7112025d85">SEQ_ERROR_OPEN</a>;</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>    <span class="keywordflow">if</span> (!readAndVerifyChunkHeader(file, <a class="code hl_define" href="io_8h.html#a68854f4d68528882dcf1f279d7deeaab">MAGIC_HEADER</a>)) {</div>
<div class="line"><span class="lineno">  151</span>        fclose(file);</div>
<div class="line"><span class="lineno">  152</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76ad37d6bc5b16ac9c67797472255d72bde">SEQ_ERROR_FORMAT</a>;</div>
<div class="line"><span class="lineno">  153</span>    }</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>    <span class="keywordflow">if</span> (!readAndVerifyChunkHeader(file, <a class="code hl_define" href="io_8h.html#a6fcfc5452c7fd3fd85f22ec59c4cbd3e">PATTERN_SECTION</a>)) {</div>
<div class="line"><span class="lineno">  156</span>        fclose(file);</div>
<div class="line"><span class="lineno">  157</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76ad37d6bc5b16ac9c67797472255d72bde">SEQ_ERROR_FORMAT</a>;</div>
<div class="line"><span class="lineno">  158</span>    }</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>    <span class="comment">// Read patterns</span></div>
<div class="line"><span class="lineno">  161</span>    <span class="keywordflow">if</span> (fread(&amp;patterns-&gt;<a class="code hl_variable" href="struct_pattern_list.html#a788587d623616169d43705c72aeb0fb4">pattern_count</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, file) != 1) {</div>
<div class="line"><span class="lineno">  162</span>        fclose(file);</div>
<div class="line"><span class="lineno">  163</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76a6cc293a8aea8980e6569442b4722f1cd">SEQ_ERROR_READ</a>;</div>
<div class="line"><span class="lineno">  164</span>    }</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>    <span class="keywordflow">if</span> (patterns-&gt;<a class="code hl_variable" href="struct_pattern_list.html#a788587d623616169d43705c72aeb0fb4">pattern_count</a> &gt; <a class="code hl_define" href="sequencer_8h.html#a24c48ef77929deff9e40e141a891dbb8">MAX_PATTERNS</a>) {</div>
<div class="line"><span class="lineno">  167</span>        fclose(file);</div>
<div class="line"><span class="lineno">  168</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76ad37d6bc5b16ac9c67797472255d72bde">SEQ_ERROR_FORMAT</a>;</div>
<div class="line"><span class="lineno">  169</span>    }</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; patterns-&gt;<a class="code hl_variable" href="struct_pattern_list.html#a788587d623616169d43705c72aeb0fb4">pattern_count</a>; i++) {</div>
<div class="line"><span class="lineno">  172</span>        <a class="code hl_struct" href="struct_pattern.html">Pattern</a>* p = &amp;patterns-&gt;<a class="code hl_variable" href="struct_pattern_list.html#a4e9655c782697f46f31bee1cc27ad739">patterns</a>[i];</div>
<div class="line"><span class="lineno">  173</span>        <span class="keywordflow">if</span> (fread(&amp;p-&gt;<a class="code hl_variable" href="struct_pattern.html#a2393e340b61feda3b21292fc19205768">pattern_size</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, file) != 1 ||</div>
<div class="line"><span class="lineno">  174</span>            fread(p-&gt;<a class="code hl_variable" href="struct_pattern.html#abdfbab70e231de4bb69bc715923ddd00">notes</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), <a class="code hl_define" href="sequencer_8h.html#a66fe023e5877900f2ff54bdf746430cb">MAX_SEQUENCE_LENGTH</a> * <a class="code hl_define" href="sequencer_8h.html#a8cfca07173aab56156922599c1099e4c">NOTE_INFO_SIZE</a>, file) </div>
<div class="line"><span class="lineno">  175</span>                != <a class="code hl_define" href="sequencer_8h.html#a66fe023e5877900f2ff54bdf746430cb">MAX_SEQUENCE_LENGTH</a> * <a class="code hl_define" href="sequencer_8h.html#a8cfca07173aab56156922599c1099e4c">NOTE_INFO_SIZE</a>) {</div>
<div class="line"><span class="lineno">  176</span>            fclose(file);</div>
<div class="line"><span class="lineno">  177</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76a6cc293a8aea8980e6569442b4722f1cd">SEQ_ERROR_READ</a>;</div>
<div class="line"><span class="lineno">  178</span>        }</div>
<div class="line"><span class="lineno">  179</span>    }</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>    <span class="comment">// Read arranger section</span></div>
<div class="line"><span class="lineno">  182</span>    <span class="keywordflow">if</span> (!readAndVerifyChunkHeader(file, <a class="code hl_define" href="io_8h.html#a7f525d635db74e4440c0cbb4053a6e8d">ARRANGER_SECTION</a>)) {</div>
<div class="line"><span class="lineno">  183</span>        fclose(file);</div>
<div class="line"><span class="lineno">  184</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76ad37d6bc5b16ac9c67797472255d72bde">SEQ_ERROR_FORMAT</a>;</div>
<div class="line"><span class="lineno">  185</span>    }</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>    <span class="keywordflow">if</span> (fread(arranger-&gt;<a class="code hl_variable" href="struct_arranger.html#a9ce765c632d4688ed2324a82e476d629">playhead_indices</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), <a class="code hl_define" href="settings_8h.html#a65e1535f1c96d54c9a70c045b70b2c2d">MAX_SEQUENCER_CHANNELS</a>, file) != <a class="code hl_define" href="settings_8h.html#a65e1535f1c96d54c9a70c045b70b2c2d">MAX_SEQUENCER_CHANNELS</a> ||</div>
<div class="line"><span class="lineno">  188</span>        fread(&amp;arranger-&gt;activeChannels, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, file) != 1 ||</div>
<div class="line"><span class="lineno">  189</span>        fread(&amp;arranger-&gt;<a class="code hl_variable" href="struct_arranger.html#abcbf69e6e9acfc6f6771703b328830f9">selected_x</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, file) != 1 ||</div>
<div class="line"><span class="lineno">  190</span>        fread(&amp;arranger-&gt;<a class="code hl_variable" href="struct_arranger.html#a33afc304f8aa2050cc9c91f91bacd245">selected_y</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, file) != 1 ||</div>
<div class="line"><span class="lineno">  191</span>        fread(&amp;arranger-&gt;<a class="code hl_variable" href="struct_arranger.html#a19ad50f2330623205940d8842cd74525">loop</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, file) != 1 ||</div>
<div class="line"><span class="lineno">  192</span>        fread(&amp;arranger-&gt;<a class="code hl_variable" href="struct_arranger.html#a0336394d075942924f0310d618955d70">beats_per_minute</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, file) != 1 ||</div>
<div class="line"><span class="lineno">  193</span>        fread(&amp;arranger-&gt;<a class="code hl_variable" href="struct_arranger.html#a0c99c06fd9d8281fab1012abb27ab6c3">playing</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, file) != 1 ||</div>
<div class="line"><span class="lineno">  194</span>        fread(arranger-&gt;<a class="code hl_variable" href="struct_arranger.html#a3401a65a609f1e2075bf9e4377da5feb">song</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), <a class="code hl_define" href="settings_8h.html#a65e1535f1c96d54c9a70c045b70b2c2d">MAX_SEQUENCER_CHANNELS</a> * <a class="code hl_define" href="sequencer_8h.html#a627cd946d4513d59e667d0a5e4b45e2f">MAX_SONG_LENGTH</a>, file) </div>
<div class="line"><span class="lineno">  195</span>            != <a class="code hl_define" href="settings_8h.html#a65e1535f1c96d54c9a70c045b70b2c2d">MAX_SEQUENCER_CHANNELS</a> * <a class="code hl_define" href="sequencer_8h.html#a627cd946d4513d59e667d0a5e4b45e2f">MAX_SONG_LENGTH</a>) {</div>
<div class="line"><span class="lineno">  196</span>        fclose(file);</div>
<div class="line"><span class="lineno">  197</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76a6cc293a8aea8980e6569442b4722f1cd">SEQ_ERROR_READ</a>;</div>
<div class="line"><span class="lineno">  198</span>    }</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>    fclose(file);</div>
<div class="line"><span class="lineno">  201</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76a274edc266d695198fd8dd759797639c7">SEQ_OK</a>;</div>
<div class="line"><span class="lineno">  202</span>}</div>
<div class="ttc" id="aio_8h_html_a68854f4d68528882dcf1f279d7deeaab"><div class="ttname"><a href="io_8h.html#a68854f4d68528882dcf1f279d7deeaab">MAGIC_HEADER</a></div><div class="ttdeci">#define MAGIC_HEADER</div><div class="ttdef"><b>Definition</b> io.h:10</div></div>
<div class="ttc" id="aio_8h_html_a6fcfc5452c7fd3fd85f22ec59c4cbd3e"><div class="ttname"><a href="io_8h.html#a6fcfc5452c7fd3fd85f22ec59c4cbd3e">PATTERN_SECTION</a></div><div class="ttdeci">#define PATTERN_SECTION</div><div class="ttdef"><b>Definition</b> io.h:11</div></div>
<div class="ttc" id="aio_8h_html_a7f525d635db74e4440c0cbb4053a6e8d"><div class="ttname"><a href="io_8h.html#a7f525d635db74e4440c0cbb4053a6e8d">ARRANGER_SECTION</a></div><div class="ttdeci">#define ARRANGER_SECTION</div><div class="ttdef"><b>Definition</b> io.h:12</div></div>
<div class="ttc" id="aio_8h_html_aeebbb27ca2f86add1e5bb4cb9f799b76a274edc266d695198fd8dd759797639c7"><div class="ttname"><a href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76a274edc266d695198fd8dd759797639c7">SEQ_OK</a></div><div class="ttdeci">@ SEQ_OK</div><div class="ttdef"><b>Definition</b> io.h:24</div></div>
<div class="ttc" id="aio_8h_html_aeebbb27ca2f86add1e5bb4cb9f799b76a54276461b1aaf5c8921fba7112025d85"><div class="ttname"><a href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76a54276461b1aaf5c8921fba7112025d85">SEQ_ERROR_OPEN</a></div><div class="ttdeci">@ SEQ_ERROR_OPEN</div><div class="ttdef"><b>Definition</b> io.h:25</div></div>
<div class="ttc" id="aio_8h_html_aeebbb27ca2f86add1e5bb4cb9f799b76a6cc293a8aea8980e6569442b4722f1cd"><div class="ttname"><a href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76a6cc293a8aea8980e6569442b4722f1cd">SEQ_ERROR_READ</a></div><div class="ttdeci">@ SEQ_ERROR_READ</div><div class="ttdef"><b>Definition</b> io.h:26</div></div>
<div class="ttc" id="aio_8h_html_aeebbb27ca2f86add1e5bb4cb9f799b76ad37d6bc5b16ac9c67797472255d72bde"><div class="ttname"><a href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76ad37d6bc5b16ac9c67797472255d72bde">SEQ_ERROR_FORMAT</a></div><div class="ttdeci">@ SEQ_ERROR_FORMAT</div><div class="ttdef"><b>Definition</b> io.h:28</div></div>
<div class="ttc" id="asequencer_8h_html_a24c48ef77929deff9e40e141a891dbb8"><div class="ttname"><a href="sequencer_8h.html#a24c48ef77929deff9e40e141a891dbb8">MAX_PATTERNS</a></div><div class="ttdeci">#define MAX_PATTERNS</div><div class="ttdef"><b>Definition</b> sequencer.h:6</div></div>
<div class="ttc" id="asequencer_8h_html_a627cd946d4513d59e667d0a5e4b45e2f"><div class="ttname"><a href="sequencer_8h.html#a627cd946d4513d59e667d0a5e4b45e2f">MAX_SONG_LENGTH</a></div><div class="ttdeci">#define MAX_SONG_LENGTH</div><div class="ttdef"><b>Definition</b> sequencer.h:7</div></div>
<div class="ttc" id="asequencer_8h_html_a66fe023e5877900f2ff54bdf746430cb"><div class="ttname"><a href="sequencer_8h.html#a66fe023e5877900f2ff54bdf746430cb">MAX_SEQUENCE_LENGTH</a></div><div class="ttdeci">#define MAX_SEQUENCE_LENGTH</div><div class="ttdef"><b>Definition</b> sequencer.h:8</div></div>
<div class="ttc" id="asequencer_8h_html_a8cfca07173aab56156922599c1099e4c"><div class="ttname"><a href="sequencer_8h.html#a8cfca07173aab56156922599c1099e4c">NOTE_INFO_SIZE</a></div><div class="ttdeci">#define NOTE_INFO_SIZE</div><div class="ttdef"><b>Definition</b> sequencer.h:9</div></div>
<div class="ttc" id="asettings_8h_html_a65e1535f1c96d54c9a70c045b70b2c2d"><div class="ttname"><a href="settings_8h.html#a65e1535f1c96d54c9a70c045b70b2c2d">MAX_SEQUENCER_CHANNELS</a></div><div class="ttdeci">#define MAX_SEQUENCER_CHANNELS</div><div class="ttdef"><b>Definition</b> settings.h:5</div></div>
<div class="ttc" id="astruct_arranger_html_a0336394d075942924f0310d618955d70"><div class="ttname"><a href="struct_arranger.html#a0336394d075942924f0310d618955d70">Arranger::beats_per_minute</a></div><div class="ttdeci">int beats_per_minute</div><div class="ttdef"><b>Definition</b> sequencer.h:31</div></div>
<div class="ttc" id="astruct_arranger_html_a0c99c06fd9d8281fab1012abb27ab6c3"><div class="ttname"><a href="struct_arranger.html#a0c99c06fd9d8281fab1012abb27ab6c3">Arranger::playing</a></div><div class="ttdeci">int playing</div><div class="ttdef"><b>Definition</b> sequencer.h:32</div></div>
<div class="ttc" id="astruct_arranger_html_a19ad50f2330623205940d8842cd74525"><div class="ttname"><a href="struct_arranger.html#a19ad50f2330623205940d8842cd74525">Arranger::loop</a></div><div class="ttdeci">int loop</div><div class="ttdef"><b>Definition</b> sequencer.h:30</div></div>
<div class="ttc" id="astruct_arranger_html_a33afc304f8aa2050cc9c91f91bacd245"><div class="ttname"><a href="struct_arranger.html#a33afc304f8aa2050cc9c91f91bacd245">Arranger::selected_y</a></div><div class="ttdeci">int selected_y</div><div class="ttdef"><b>Definition</b> sequencer.h:29</div></div>
<div class="ttc" id="astruct_arranger_html_a3401a65a609f1e2075bf9e4377da5feb"><div class="ttname"><a href="struct_arranger.html#a3401a65a609f1e2075bf9e4377da5feb">Arranger::song</a></div><div class="ttdeci">int song[MAX_SEQUENCER_CHANNELS][MAX_SONG_LENGTH]</div><div class="ttdef"><b>Definition</b> sequencer.h:34</div></div>
<div class="ttc" id="astruct_arranger_html_a9ce765c632d4688ed2324a82e476d629"><div class="ttname"><a href="struct_arranger.html#a9ce765c632d4688ed2324a82e476d629">Arranger::playhead_indices</a></div><div class="ttdeci">int playhead_indices[MAX_SEQUENCER_CHANNELS]</div><div class="ttdef"><b>Definition</b> sequencer.h:26</div></div>
<div class="ttc" id="astruct_arranger_html_abcbf69e6e9acfc6f6771703b328830f9"><div class="ttname"><a href="struct_arranger.html#abcbf69e6e9acfc6f6771703b328830f9">Arranger::selected_x</a></div><div class="ttdeci">int selected_x</div><div class="ttdef"><b>Definition</b> sequencer.h:28</div></div>
<div class="ttc" id="astruct_pattern_html"><div class="ttname"><a href="struct_pattern.html">Pattern</a></div><div class="ttdoc">Represents a musical pattern containing a sequence of notes. each row is a note, each column contains...</div><div class="ttdef"><b>Definition</b> sequencer.h:14</div></div>
<div class="ttc" id="astruct_pattern_html_a2393e340b61feda3b21292fc19205768"><div class="ttname"><a href="struct_pattern.html#a2393e340b61feda3b21292fc19205768">Pattern::pattern_size</a></div><div class="ttdeci">int pattern_size</div><div class="ttdef"><b>Definition</b> sequencer.h:15</div></div>
<div class="ttc" id="astruct_pattern_html_abdfbab70e231de4bb69bc715923ddd00"><div class="ttname"><a href="struct_pattern.html#abdfbab70e231de4bb69bc715923ddd00">Pattern::notes</a></div><div class="ttdeci">int notes[MAX_SEQUENCE_LENGTH][NOTE_INFO_SIZE]</div><div class="ttdef"><b>Definition</b> sequencer.h:16</div></div>
<div class="ttc" id="astruct_pattern_list_html_a4e9655c782697f46f31bee1cc27ad739"><div class="ttname"><a href="struct_pattern_list.html#a4e9655c782697f46f31bee1cc27ad739">PatternList::patterns</a></div><div class="ttdeci">Pattern patterns[MAX_PATTERNS]</div><div class="ttdef"><b>Definition</b> sequencer.h:21</div></div>
<div class="ttc" id="astruct_pattern_list_html_a788587d623616169d43705c72aeb0fb4"><div class="ttname"><a href="struct_pattern_list.html#a788587d623616169d43705c72aeb0fb4">PatternList::pattern_count</a></div><div class="ttdeci">int pattern_count</div><div class="ttdef"><b>Definition</b> sequencer.h:20</div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

</div>
</div>
<a id="a34b69ab24373985afad6a73ba8ec5f9e" name="a34b69ab24373985afad6a73ba8ec5f9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34b69ab24373985afad6a73ba8ec5f9e">&#9670;&#160;</a></span>loadSettings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02">FileResult</a> loadSettings </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_settings.html">Settings</a> *</td>          <td class="paramname"><span class="paramname"><em>settings</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads application settings from a binary file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to the settings file to load </td></tr>
    <tr><td class="paramname">settings</td><td>Pointer to <a class="el" href="struct_settings.html">Settings</a> structure to populate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02">FileResult</a> indicating success (FILE_OK) or specific error codes:<ul>
<li>FILE_ERROR_OPEN if file cannot be opened</li>
<li>FILE_ERROR_FORMAT if file has invalid magic number</li>
<li>FILE_ERROR_READ if reading settings data fails </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   16</span>                                                                  {</div>
<div class="line"><span class="lineno">   17</span>    FILE* file = fopen(filename, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><span class="lineno">   18</span>    <span class="keywordflow">if</span> (!file) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02a7ddb4c741a1e9ec5a6f81c19a82533ff">FILE_ERROR_OPEN</a>;</div>
<div class="line"><span class="lineno">   19</span>    </div>
<div class="line"><span class="lineno">   20</span>    <span class="keywordtype">char</span> magic[4];</div>
<div class="line"><span class="lineno">   21</span>    <span class="keywordflow">if</span> (fread(magic, 1, 4, file) != 4 || memcmp(magic, <span class="stringliteral">&quot;SET1&quot;</span>, 4) != 0) {</div>
<div class="line"><span class="lineno">   22</span>        fclose(file);</div>
<div class="line"><span class="lineno">   23</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02a59413acd484f9fd5940fa48bb912bd2d">FILE_ERROR_FORMAT</a>;</div>
<div class="line"><span class="lineno">   24</span>    }</div>
<div class="line"><span class="lineno">   25</span>    </div>
<div class="line"><span class="lineno">   26</span>    <span class="keywordflow">if</span> (fread(settings, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_settings.html">Settings</a>), 1, file) != 1) {</div>
<div class="line"><span class="lineno">   27</span>        fclose(file);</div>
<div class="line"><span class="lineno">   28</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02ac542004ab939b96377b0b1ccd48946b7">FILE_ERROR_READ</a>;</div>
<div class="line"><span class="lineno">   29</span>    }</div>
<div class="line"><span class="lineno">   30</span>    </div>
<div class="line"><span class="lineno">   31</span>    fclose(file);</div>
<div class="line"><span class="lineno">   32</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02acc5440fbbcea7fbd0094369d27686b16">FILE_OK</a>;</div>
<div class="line"><span class="lineno">   33</span>}</div>
<div class="ttc" id="astruct_settings_html"><div class="ttname"><a href="struct_settings.html">Settings</a></div><div class="ttdef"><b>Definition</b> settings.h:10</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a22a0fa54facdb8d991e45e222db52ead" name="a22a0fa54facdb8d991e45e222db52ead"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22a0fa54facdb8d991e45e222db52ead">&#9670;&#160;</a></span>saveColourScheme()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02">FileResult</a> saveColourScheme </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_colour_scheme.html">ColourScheme</a> *</td>          <td class="paramname"><span class="paramname"><em>colourScheme</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves a colour scheme to a binary file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to save the colour scheme file </td></tr>
    <tr><td class="paramname">colourScheme</td><td>Pointer to <a class="el" href="struct_colour_scheme.html">ColourScheme</a> structure to save </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02">FileResult</a> indicating success (FILE_OK) or specific error codes:<ul>
<li>FILE_ERROR_OPEN if file cannot be created/opened for writing </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   35</span>                                                                              {</div>
<div class="line"><span class="lineno">   36</span>    FILE* file = fopen(filename, <span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line"><span class="lineno">   37</span>    <span class="keywordflow">if</span> (!file) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02a7ddb4c741a1e9ec5a6f81c19a82533ff">FILE_ERROR_OPEN</a>;</div>
<div class="line"><span class="lineno">   38</span>    </div>
<div class="line"><span class="lineno">   39</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> magic[] = <span class="stringliteral">&quot;CSC1&quot;</span>;</div>
<div class="line"><span class="lineno">   40</span>    fwrite(magic, 1, 4, file);</div>
<div class="line"><span class="lineno">   41</span>    fwrite(colourScheme, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_colour_scheme.html">ColourScheme</a>), 1, file);</div>
<div class="line"><span class="lineno">   42</span>    </div>
<div class="line"><span class="lineno">   43</span>    fclose(file);</div>
<div class="line"><span class="lineno">   44</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02acc5440fbbcea7fbd0094369d27686b16">FILE_OK</a>;</div>
<div class="line"><span class="lineno">   45</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

</div>
</div>
<a id="a18b2dfb386b19c9b8a56ed880d3a7f25" name="a18b2dfb386b19c9b8a56ed880d3a7f25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18b2dfb386b19c9b8a56ed880d3a7f25">&#9670;&#160;</a></span>saveSequencerState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76">SequencerFileResult</a> saveSequencerState </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_arranger.html">Arranger</a> *</td>          <td class="paramname"><span class="paramname"><em>arranger</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_pattern_list.html">PatternList</a> *</td>          <td class="paramname"><span class="paramname"><em>patterns</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads the complete sequencer state from a binary file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to the sequencer state file to load </td></tr>
    <tr><td class="paramname">arranger</td><td>Pointer to <a class="el" href="struct_arranger.html">Arranger</a> structure to populate with playhead, channel and song data </td></tr>
    <tr><td class="paramname">patterns</td><td>Pointer to <a class="el" href="struct_pattern_list.html">PatternList</a> structure to populate with pattern data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76">SequencerFileResult</a> indicating success (SEQ_OK) or specific error codes:<ul>
<li>SEQ_ERROR_OPEN if file cannot be opened</li>
<li>SEQ_ERROR_FORMAT if file format or section headers are invalid </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  102</span>                                                                                                        {</div>
<div class="line"><span class="lineno">  103</span>    FILE* file = fopen(filename, <span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line"><span class="lineno">  104</span>    <span class="keywordflow">if</span> (!file) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76a54276461b1aaf5c8921fba7112025d85">SEQ_ERROR_OPEN</a>;</div>
<div class="line"><span class="lineno">  105</span> </div>
<div class="line"><span class="lineno">  106</span>    <span class="comment">// Write file header</span></div>
<div class="line"><span class="lineno">  107</span>    <span class="keywordflow">if</span> (!writeChunkHeader(file, <a class="code hl_define" href="io_8h.html#a68854f4d68528882dcf1f279d7deeaab">MAGIC_HEADER</a>)) {</div>
<div class="line"><span class="lineno">  108</span>        fclose(file);</div>
<div class="line"><span class="lineno">  109</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76af2e32ae73ca0c27ed47708cdf3227f33">SEQ_ERROR_WRITE</a>;</div>
<div class="line"><span class="lineno">  110</span>    }</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>    <span class="comment">// Write patterns section</span></div>
<div class="line"><span class="lineno">  113</span>    <span class="keywordflow">if</span> (!writeChunkHeader(file, <a class="code hl_define" href="io_8h.html#a6fcfc5452c7fd3fd85f22ec59c4cbd3e">PATTERN_SECTION</a>)) {</div>
<div class="line"><span class="lineno">  114</span>        fclose(file);</div>
<div class="line"><span class="lineno">  115</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76af2e32ae73ca0c27ed47708cdf3227f33">SEQ_ERROR_WRITE</a>;</div>
<div class="line"><span class="lineno">  116</span>    }</div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>    <span class="comment">// Write pattern count and patterns</span></div>
<div class="line"><span class="lineno">  119</span>    fwrite(&amp;patterns-&gt;<a class="code hl_variable" href="struct_pattern_list.html#a788587d623616169d43705c72aeb0fb4">pattern_count</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, file);</div>
<div class="line"><span class="lineno">  120</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; patterns-&gt;<a class="code hl_variable" href="struct_pattern_list.html#a788587d623616169d43705c72aeb0fb4">pattern_count</a>; i++) {</div>
<div class="line"><span class="lineno">  121</span>        <a class="code hl_struct" href="struct_pattern.html">Pattern</a>* p = &amp;patterns-&gt;<a class="code hl_variable" href="struct_pattern_list.html#a4e9655c782697f46f31bee1cc27ad739">patterns</a>[i];</div>
<div class="line"><span class="lineno">  122</span>        fwrite(&amp;p-&gt;<a class="code hl_variable" href="struct_pattern.html#a2393e340b61feda3b21292fc19205768">pattern_size</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, file);</div>
<div class="line"><span class="lineno">  123</span>        fwrite(p-&gt;<a class="code hl_variable" href="struct_pattern.html#abdfbab70e231de4bb69bc715923ddd00">notes</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), <a class="code hl_define" href="sequencer_8h.html#a66fe023e5877900f2ff54bdf746430cb">MAX_SEQUENCE_LENGTH</a> * <a class="code hl_define" href="sequencer_8h.html#a8cfca07173aab56156922599c1099e4c">NOTE_INFO_SIZE</a>, file);</div>
<div class="line"><span class="lineno">  124</span>    }</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>    <span class="comment">// Write arranger section</span></div>
<div class="line"><span class="lineno">  127</span>    <span class="keywordflow">if</span> (!writeChunkHeader(file, <a class="code hl_define" href="io_8h.html#a7f525d635db74e4440c0cbb4053a6e8d">ARRANGER_SECTION</a>)) {</div>
<div class="line"><span class="lineno">  128</span>        fclose(file);</div>
<div class="line"><span class="lineno">  129</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76af2e32ae73ca0c27ed47708cdf3227f33">SEQ_ERROR_WRITE</a>;</div>
<div class="line"><span class="lineno">  130</span>    }</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>    <span class="comment">// Write complete arranger struct</span></div>
<div class="line"><span class="lineno">  133</span>    fwrite(arranger-&gt;<a class="code hl_variable" href="struct_arranger.html#a9ce765c632d4688ed2324a82e476d629">playhead_indices</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), <a class="code hl_define" href="settings_8h.html#a65e1535f1c96d54c9a70c045b70b2c2d">MAX_SEQUENCER_CHANNELS</a>, file);</div>
<div class="line"><span class="lineno">  134</span>    fwrite(&amp;arranger-&gt;activeChannels, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, file);</div>
<div class="line"><span class="lineno">  135</span>    fwrite(&amp;arranger-&gt;<a class="code hl_variable" href="struct_arranger.html#abcbf69e6e9acfc6f6771703b328830f9">selected_x</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, file);</div>
<div class="line"><span class="lineno">  136</span>    fwrite(&amp;arranger-&gt;<a class="code hl_variable" href="struct_arranger.html#a33afc304f8aa2050cc9c91f91bacd245">selected_y</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, file);</div>
<div class="line"><span class="lineno">  137</span>    fwrite(&amp;arranger-&gt;<a class="code hl_variable" href="struct_arranger.html#a19ad50f2330623205940d8842cd74525">loop</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, file);</div>
<div class="line"><span class="lineno">  138</span>    fwrite(&amp;arranger-&gt;<a class="code hl_variable" href="struct_arranger.html#a0336394d075942924f0310d618955d70">beats_per_minute</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, file);</div>
<div class="line"><span class="lineno">  139</span>    fwrite(&amp;arranger-&gt;<a class="code hl_variable" href="struct_arranger.html#a0c99c06fd9d8281fab1012abb27ab6c3">playing</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, file);</div>
<div class="line"><span class="lineno">  140</span>    fwrite(arranger-&gt;<a class="code hl_variable" href="struct_arranger.html#a3401a65a609f1e2075bf9e4377da5feb">song</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), <a class="code hl_define" href="settings_8h.html#a65e1535f1c96d54c9a70c045b70b2c2d">MAX_SEQUENCER_CHANNELS</a> * <a class="code hl_define" href="sequencer_8h.html#a627cd946d4513d59e667d0a5e4b45e2f">MAX_SONG_LENGTH</a>, file);</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>    fclose(file);</div>
<div class="line"><span class="lineno">  143</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76a274edc266d695198fd8dd759797639c7">SEQ_OK</a>;</div>
<div class="line"><span class="lineno">  144</span>}</div>
<div class="ttc" id="aio_8h_html_aeebbb27ca2f86add1e5bb4cb9f799b76af2e32ae73ca0c27ed47708cdf3227f33"><div class="ttname"><a href="io_8h.html#aeebbb27ca2f86add1e5bb4cb9f799b76af2e32ae73ca0c27ed47708cdf3227f33">SEQ_ERROR_WRITE</a></div><div class="ttdeci">@ SEQ_ERROR_WRITE</div><div class="ttdef"><b>Definition</b> io.h:27</div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

</div>
</div>
<a id="a0ee74bbd7a1d323b8c4533cfee28587b" name="a0ee74bbd7a1d323b8c4533cfee28587b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ee74bbd7a1d323b8c4533cfee28587b">&#9670;&#160;</a></span>saveSettings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02">FileResult</a> saveSettings </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_settings.html">Settings</a> *</td>          <td class="paramname"><span class="paramname"><em>settings</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves application settings to a binary file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to save the settings file </td></tr>
    <tr><td class="paramname">settings</td><td>Pointer to <a class="el" href="struct_settings.html">Settings</a> structure to save </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02">FileResult</a> indicating success (FILE_OK) or specific error codes:<ul>
<li>FILE_ERROR_OPEN if file cannot be created/opened for writing </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">    4</span>                                                                  {</div>
<div class="line"><span class="lineno">    5</span>    FILE* file = fopen(filename, <span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line"><span class="lineno">    6</span>    <span class="keywordflow">if</span> (!file) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02a7ddb4c741a1e9ec5a6f81c19a82533ff">FILE_ERROR_OPEN</a>;</div>
<div class="line"><span class="lineno">    7</span>    </div>
<div class="line"><span class="lineno">    8</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> magic[] = <span class="stringliteral">&quot;SET1&quot;</span>;</div>
<div class="line"><span class="lineno">    9</span>    fwrite(magic, 1, 4, file);</div>
<div class="line"><span class="lineno">   10</span>    fwrite(settings, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_settings.html">Settings</a>), 1, file);</div>
<div class="line"><span class="lineno">   11</span>    </div>
<div class="line"><span class="lineno">   12</span>    fclose(file);</div>
<div class="line"><span class="lineno">   13</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="io_8h.html#a20f28dd2422b72c67a3b48aeb5486c02acc5440fbbcea7fbd0094369d27686b16">FILE_OK</a>;</div>
<div class="line"><span class="lineno">   14</span>}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="io_8c.html">io.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.1 </li>
  </ul>
</div>
</body>
</html>
